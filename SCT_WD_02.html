<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dark Stopwatch - Precision Timer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'poppins': ['Poppins', 'sans-serif'],
                        'mono': ['Roboto Mono', 'monospace'],
                    },
                    colors: {
                        'navy': '#1a1a2e',
                        'teal': '#00f5d4',
                    }
                }
            }
        }
    </script>
    
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #1a1a2e;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .timer-display {
            font-family: 'Roboto Mono', monospace;
            text-shadow: 0 0 20px rgba(0, 245, 212, 0.3);
        }
        
        .btn-start {
            background: linear-gradient(135deg, #10b981, #059669);
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }
        
        .btn-start:hover {
            background: linear-gradient(135deg, #059669, #047857);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        }
        
        .btn-pause {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
        }
        
        .btn-pause:hover {
            background: linear-gradient(135deg, #d97706, #b45309);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
        }
        
        .btn-reset {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
        }
        
        .btn-reset:hover {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(239, 68, 68, 0.4);
        }
        
        .btn-lap {
            background: linear-gradient(135deg, #00f5d4, #00d4aa);
            box-shadow: 0 4px 15px rgba(0, 245, 212, 0.3);
        }
        
        .btn-lap:hover {
            background: linear-gradient(135deg, #00d4aa, #00b894);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 245, 212, 0.4);
        }
        
        .btn-disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }
        
        .lap-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 245, 212, 0.2);
            transition: all 0.3s ease;
        }
        
        .lap-item:hover {
            background: rgba(0, 245, 212, 0.1);
            border-color: rgba(0, 245, 212, 0.4);
        }
        
        .scrollbar-custom::-webkit-scrollbar {
            width: 8px;
        }
        
        .scrollbar-custom::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }
        
        .scrollbar-custom::-webkit-scrollbar-thumb {
            background: rgba(0, 245, 212, 0.5);
            border-radius: 4px;
        }
        
        .scrollbar-custom::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 245, 212, 0.7);
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
    </style>
</head>
<body class="min-h-screen bg-navy flex items-center justify-center p-4">
    <div class="glass-card rounded-3xl p-8 w-full max-w-2xl shadow-2xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="inline-flex items-center justify-center w-16 h-16 bg-teal rounded-2xl mb-4 shadow-lg">
                <i class="fas fa-stopwatch text-2xl text-navy"></i>
            </div>
            <h1 class="text-3xl font-bold text-white mb-2">Stopwatch</h1>
            
        </div>

        <!-- Timer Display -->
        <div class="text-center mb-8">
            <div class="glass-card rounded-2xl p-8 mb-6">
                <div id="timerDisplay" class="timer-display text-6xl md:text-7xl font-bold text-teal mb-4">
                    00:00.00
                </div>
                <div id="statusIndicator" class="flex items-center justify-center space-x-2">
                    <div id="statusDot" class="w-3 h-3 bg-gray-500 rounded-full"></div>
                    <span id="statusText" class="text-gray-300 text-sm font-medium">Stopped</span>
                </div>
            </div>
        </div>

        <!-- Control Buttons -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
            <button id="startBtn" class="btn-start text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 flex items-center justify-center space-x-2">
                <i class="fas fa-play"></i>
                <span>Start</span>
            </button>
            
            <button id="pauseBtn" class="btn-pause text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 flex items-center justify-center space-x-2 btn-disabled">
                <i class="fas fa-pause"></i>
                <span>Pause</span>
            </button>
            
            <button id="resetBtn" class="btn-reset text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 flex items-center justify-center space-x-2">
                <i class="fas fa-redo"></i>
                <span>Reset</span>
            </button>
            
            <button id="lapBtn" class="btn-lap text-navy font-semibold py-3 px-6 rounded-xl transition-all duration-300 flex items-center justify-center space-x-2 btn-disabled">
                <i class="fas fa-flag"></i>
                <span>Lap</span>
            </button>
        </div>

        <!-- Lap Times Section -->
        <div class="glass-card rounded-2xl p-6">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-xl font-semibold text-white flex items-center space-x-2">
                    <i class="fas fa-list text-teal"></i>
                    <span>Lap Times</span>
                </h3>
                <span id="lapCounter" class="text-teal font-mono text-sm">0 laps</span>
            </div>
            
            <div id="lapTimesContainer" class="max-h-64 overflow-y-auto scrollbar-custom">
                <div id="noLapsMessage" class="text-center py-8 text-gray-400">
                    <i class="fas fa-clock text-4xl mb-4 opacity-50"></i>
                    <p class="text-lg mb-2">No lap times recorded</p>
                    <p class="text-sm">Start the timer and click "Lap" to record times</p>
                </div>
                <div id="lapsList" class="space-y-3 hidden"></div>
            </div>
        </div>

        <!-- Statistics (shown when laps exist) -->
        <div id="statisticsSection" class="mt-6 glass-card rounded-2xl p-6 hidden">
            <h4 class="text-lg font-semibold text-white mb-4 flex items-center space-x-2">
                <i class="fas fa-chart-line text-teal"></i>
                <span>Statistics</span>
            </h4>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="text-center">
                    <div id="fastestLap" class="text-2xl font-mono font-bold text-green-400 mb-1">--:--</div>
                    <div class="text-xs text-gray-400">Fastest Lap</div>
                </div>
                <div class="text-center">
                    <div id="slowestLap" class="text-2xl font-mono font-bold text-red-400 mb-1">--:--</div>
                    <div class="text-xs text-gray-400">Slowest Lap</div>
                </div>
                <div class="text-center">
                    <div id="averageLap" class="text-2xl font-mono font-bold text-yellow-400 mb-1">--:--</div>
                    <div class="text-xs text-gray-400">Average Lap</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class Stopwatch {
            constructor() {
                this.startTime = 0;
                this.elapsedTime = 0;
                this.timerInterval = null;
                this.isRunning = false;
                this.isPaused = false;
                this.laps = [];
                
                this.initializeElements();
                this.attachEventListeners();
                this.updateDisplay();
            }
            
            initializeElements() {
                this.timerDisplay = document.getElementById('timerDisplay');
                this.statusDot = document.getElementById('statusDot');
                this.statusText = document.getElementById('statusText');
                this.startBtn = document.getElementById('startBtn');
                this.pauseBtn = document.getElementById('pauseBtn');
                this.resetBtn = document.getElementById('resetBtn');
                this.lapBtn = document.getElementById('lapBtn');
                this.lapCounter = document.getElementById('lapCounter');
                this.noLapsMessage = document.getElementById('noLapsMessage');
                this.lapsList = document.getElementById('lapsList');
                this.statisticsSection = document.getElementById('statisticsSection');
                this.fastestLap = document.getElementById('fastestLap');
                this.slowestLap = document.getElementById('slowestLap');
                this.averageLap = document.getElementById('averageLap');
            }
            
            attachEventListeners() {
                this.startBtn.addEventListener('click', () => this.start());
                this.pauseBtn.addEventListener('click', () => this.pause());
                this.resetBtn.addEventListener('click', () => this.reset());
                this.lapBtn.addEventListener('click', () => this.recordLap());
                
                // Keyboard shortcuts
                document.addEventListener('keydown', (e) => {
                    if (e.code === 'Space') {
                        e.preventDefault();
                        if (this.isRunning) {
                            this.pause();
                        } else {
                            this.start();
                        }
                    } else if (e.code === 'KeyR' && e.ctrlKey) {
                        e.preventDefault();
                        this.reset();
                    } else if (e.code === 'KeyL' && this.isRunning) {
                        e.preventDefault();
                        this.recordLap();
                    }
                });
            }
            
            start() {
                if (!this.isRunning) {
                    this.startTime = performance.now() - this.elapsedTime;
                    this.isRunning = true;
                    this.isPaused = false;
                    
                    this.timerInterval = setInterval(() => {
                        this.elapsedTime = performance.now() - this.startTime;
                        this.updateDisplay();
                    }, 10); // Update every 10ms for smooth display
                    
                    this.updateButtonStates();
                    this.updateStatus('running');
                }
            }
            
            pause() {
                if (this.isRunning) {
                    this.isRunning = false;
                    this.isPaused = true;
                    clearInterval(this.timerInterval);
                    
                    this.updateButtonStates();
                    this.updateStatus('paused');
                }
            }
            
            reset() {
                this.isRunning = false;
                this.isPaused = false;
                this.elapsedTime = 0;
                this.laps = [];
                
                if (this.timerInterval) {
                    clearInterval(this.timerInterval);
                }
                
                this.updateDisplay();
                this.updateButtonStates();
                this.updateStatus('stopped');
                this.updateLapDisplay();
                this.updateStatistics();
            }
            
            recordLap() {
                if (this.isRunning) {
                    const lapTime = this.elapsedTime;
                    const lapNumber = this.laps.length + 1;
                    const previousLapTime = this.laps.length > 0 ? this.laps[this.laps.length - 1].totalTime : 0;
                    const splitTime = lapTime - previousLapTime;
                    
                    this.laps.push({
                        number: lapNumber,
                        totalTime: lapTime,
                        splitTime: splitTime,
                        timestamp: new Date()
                    });
                    
                    this.updateLapDisplay();
                    this.updateStatistics();
                }
            }
            
            updateDisplay() {
                const formattedTime = this.formatTime(this.elapsedTime);
                this.timerDisplay.textContent = formattedTime;
            }
            
            updateButtonStates() {
                // Start button
                if (this.isRunning) {
                    this.startBtn.classList.add('btn-disabled');
                    this.startBtn.disabled = true;
                } else {
                    this.startBtn.classList.remove('btn-disabled');
                    this.startBtn.disabled = false;
                }
                
                // Pause button
                if (this.isRunning) {
                    this.pauseBtn.classList.remove('btn-disabled');
                    this.pauseBtn.disabled = false;
                } else {
                    this.pauseBtn.classList.add('btn-disabled');
                    this.pauseBtn.disabled = true;
                }
                
                // Lap button
                if (this.isRunning) {
                    this.lapBtn.classList.remove('btn-disabled');
                    this.lapBtn.disabled = false;
                } else {
                    this.lapBtn.classList.add('btn-disabled');
                    this.lapBtn.disabled = true;
                }
            }
            
            updateStatus(status) {
                switch (status) {
                    case 'running':
                        this.statusDot.className = 'w-3 h-3 bg-green-500 rounded-full pulse-animation';
                        this.statusText.textContent = 'Running';
                        this.statusText.className = 'text-green-400 text-sm font-medium';
                        break;
                    case 'paused':
                        this.statusDot.className = 'w-3 h-3 bg-yellow-500 rounded-full';
                        this.statusText.textContent = 'Paused';
                        this.statusText.className = 'text-yellow-400 text-sm font-medium';
                        break;
                    case 'stopped':
                        this.statusDot.className = 'w-3 h-3 bg-gray-500 rounded-full';
                        this.statusText.textContent = 'Stopped';
                        this.statusText.className = 'text-gray-300 text-sm font-medium';
                        break;
                }
            }
            
            updateLapDisplay() {
                const lapCount = this.laps.length;
                this.lapCounter.textContent = `${lapCount} lap${lapCount !== 1 ? 's' : ''}`;
                
                if (lapCount === 0) {
                    this.noLapsMessage.classList.remove('hidden');
                    this.lapsList.classList.add('hidden');
                    this.statisticsSection.classList.add('hidden');
                } else {
                    this.noLapsMessage.classList.add('hidden');
                    this.lapsList.classList.remove('hidden');
                    this.statisticsSection.classList.remove('hidden');
                    
                    // Clear existing lap items
                    this.lapsList.innerHTML = '';
                    
                    // Add lap items (newest first)
                    for (let i = this.laps.length - 1; i >= 0; i--) {
                        const lap = this.laps[i];
                        const lapElement = this.createLapElement(lap);
                        this.lapsList.appendChild(lapElement);
                    }
                }
            }
            
            createLapElement(lap) {
                const lapDiv = document.createElement('div');
                lapDiv.className = 'lap-item rounded-xl p-4 flex items-center justify-between';
                
                const leftSection = document.createElement('div');
                leftSection.className = 'flex items-center space-x-4';
                
                const lapNumber = document.createElement('div');
                lapNumber.className = 'w-10 h-10 bg-teal rounded-lg flex items-center justify-center text-navy font-bold text-sm';
                lapNumber.textContent = lap.number;
                
                const lapInfo = document.createElement('div');
                
                const splitTime = document.createElement('div');
                splitTime.className = 'text-white font-mono text-lg font-semibold';
                splitTime.textContent = this.formatTime(lap.splitTime);
                
                const totalTime = document.createElement('div');
                totalTime.className = 'text-gray-400 font-mono text-sm';
                totalTime.textContent = `Total: ${this.formatTime(lap.totalTime)}`;
                
                lapInfo.appendChild(splitTime);
                lapInfo.appendChild(totalTime);
                
                leftSection.appendChild(lapNumber);
                leftSection.appendChild(lapInfo);
                
                const rightSection = document.createElement('div');
                rightSection.className = 'text-right';
                
                const timestamp = document.createElement('div');
                timestamp.className = 'text-gray-500 text-xs';
                timestamp.textContent = lap.timestamp.toLocaleTimeString();
                
                rightSection.appendChild(timestamp);
                
                lapDiv.appendChild(leftSection);
                lapDiv.appendChild(rightSection);
                
                return lapDiv;
            }
            
            updateStatistics() {
                if (this.laps.length === 0) {
                    this.fastestLap.textContent = '--:--';
                    this.slowestLap.textContent = '--:--';
                    this.averageLap.textContent = '--:--';
                    return;
                }
                
                const splitTimes = this.laps.map(lap => lap.splitTime);
                const fastest = Math.min(...splitTimes);
                const slowest = Math.max(...splitTimes);
                const average = splitTimes.reduce((sum, time) => sum + time, 0) / splitTimes.length;
                
                this.fastestLap.textContent = this.formatTime(fastest);
                this.slowestLap.textContent = this.formatTime(slowest);
                this.averageLap.textContent = this.formatTime(average);
            }
            
            formatTime(milliseconds) {
                const totalSeconds = Math.floor(milliseconds / 1000);
                const minutes = Math.floor(totalSeconds / 60);
                const seconds = totalSeconds % 60;
                const centiseconds = Math.floor((milliseconds % 1000) / 10);
                
                return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}.${centiseconds.toString().padStart(2, '0')}`;
            }
        }
        
        // Initialize the stopwatch when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new Stopwatch();
        });
    </script>
</body>
</html>